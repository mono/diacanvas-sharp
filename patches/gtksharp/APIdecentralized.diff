Index: Makefile.in
===================================================================
RCS file: /cvs/public/gtk-sharp/Makefile.in,v
retrieving revision 1.3
diff -u -r1.3 Makefile.in
--- Makefile.in	7 Oct 2003 05:52:22 -0000	1.3
+++ Makefile.in	9 Oct 2003 21:17:43 -0000
@@ -1,6 +1,6 @@
 NATIVE_DIRS = glue parser
 
-DIRS=generator api glib pango atk gdk gtk glade art gnome gtkhtml gda gnomedb gconf rsvg sample
+DIRS=generator glib pango atk gdk gtk glade art gnome gtkhtml gda gnomedb gconf rsvg sample
 ROOT=/cygdrive/$(subst \,/,$(subst :\,/,$(SYSTEMROOT)))
 CSC=$(ROOT)/microsoft.net/framework/v1.0.3705/csc.exe
 MCS=mcs
Index: configure.in
===================================================================
RCS file: /cvs/public/gtk-sharp/configure.in,v
retrieving revision 1.35
diff -u -r1.35 configure.in
--- configure.in	7 Oct 2003 05:52:22 -0000	1.35
+++ configure.in	9 Oct 2003 21:17:43 -0000
@@ -111,7 +111,6 @@
 glue/Makefile
 parser/Makefile
 generator/Makefile
-api/Makefile
 glib/Makefile
 pango/Makefile
 atk/Makefile
Index: api/.cvsignore
===================================================================
RCS file: api/.cvsignore
diff -N api/.cvsignore
--- api/.cvsignore	27 Feb 2003 05:16:47 -0000	1.2
+++ /dev/null	1 Jan 1970 00:00:00 -0000
@@ -1,6 +0,0 @@
-*.dll
-*.exe
-generated
-generated-stamp
-Makefile
-
Index: api/Makefile.in
===================================================================
RCS file: api/Makefile.in
diff -N api/Makefile.in
--- api/Makefile.in	7 Oct 2003 05:52:22 -0000	1.10
+++ /dev/null	1 Jan 1970 00:00:00 -0000
@@ -1,33 +0,0 @@
-APIS = \
-	atk-api.xml \
-	pango-api.xml \
-	gdk-api.xml \
-	gdk-symbols.xml \
-	gtk-api.xml \
-	gtk-symbols.xml \
-	glade-api.xml \
-	art-api.xml \
-	gnome-api.xml \
-	gda-api.xml \
-	gst-api.xml \
-	gnomedb-api.xml \
-	rsvg-api.xml \
-
-
-RUNTIME=mono 
-
-all: generated-stamp
-
-generated-stamp: $(APIS) ../generator/gapi_codegen.exe
-	$(RUNTIME) ../generator/gapi_codegen.exe --generate $(APIS) && touch generated-stamp
-
-clean:
-	rm -f generated-stamp
-
-prefix=@prefix@
-DESTDIR=
-apidir=$(DESTDIR)$(prefix)/share/gapi
-
-install: all
-	../mkinstalldirs $(apidir) && \
-	cp $(APIS) $(apidir)

Index: art/.cvsignore
===================================================================
RCS file: /cvs/public/gtk-sharp/art/.cvsignore,v
retrieving revision 1.1
diff -u -r1.1 .cvsignore
--- art/.cvsignore	16 Aug 2002 05:00:30 -0000	1.1
+++ art/.cvsignore	9 Oct 2003 21:17:43 -0000
@@ -1,6 +1,5 @@
 *.dll
-*.exe
-*.xml
 generated
+generated-stamp
 Makefile
 
Index: art/Makefile.in
===================================================================
RCS file: /cvs/public/gtk-sharp/art/Makefile.in,v
retrieving revision 1.6
diff -u -r1.6 Makefile.in
--- art/Makefile.in	8 Oct 2003 22:13:35 -0000	1.6
+++ art/Makefile.in	9 Oct 2003 21:17:43 -0000
@@ -1,22 +1,39 @@
-MCS=mcs
-DESTDIR=
-prefix=@prefix@
+APIS=           art-api.xml
 
-all: linux
+INCLUDE_APIS = 	../atk/atk-api.xml 	\
+		../pango/pango-api.xml 	\
+		../gdk/gdk-api.xml 	\
+		../gdk/gdk-symbols.xml
 
-windows:
-	$(CSC) /unsafe /target:library /r:../glib/glib-sharp.dll /r:../pango/pango-sharp.dll /r:../atk/atk-sharp.dll /r:../gdk/gdk-sharp.dll /r:../gdk/gdk-imaging-sharp.dll /out:art-sharp.dll /recurse:*.cs
+RUNTIME=mono
+MCS=mcs
+ASSEMBLY=art-sharp.dll
 
-linux: art-sharp.dll
+all: $(ASSEMBLY)
 
-art-sharp.dll: generated/*.cs
-	$(MCS) --unsafe -nowarn:0660,0661 --target library -r System.Drawing -L ../glib -L ../pango -L ../atk -L ../gdk -r glib-sharp.dll -r pango-sharp.dll -r atk-sharp.dll -r gdk-sharp.dll -o art-sharp.dll --recurse '*.cs'
+generated-stamp: $(APIS) ../generator/gapi_codegen.exe
+	$(RUNTIME) ../generator/gapi_codegen.exe --generate $(APIS) 	\
+	--include $(INCLUDE_APIS) --outdir=generated --customdir=.	\
+	--assembly-name=art-sharp && touch generated-stamp
+
+$(ASSEMBLY): generated-stamp
+	$(MCS) --unsafe -nowarn:0660,0661 --target library 	\
+	-r System.Drawing -r ../glib/glib-sharp.dll 		\
+	-r ../pango/pango-sharp.dll -r ../atk/atk-sharp.dll 	\
+	-r ../gdk/gdk-sharp.dll -o $(ASSEMBLY) --recurse '*.cs'
 
 clean:
-	rm -f *.dll
+	rm -f generated-stamp
+	rm -f $(ASSEMBLY)
 	rm -rf generated
 
+prefix=/usr
+DESTDIR=
+apidir=$(DESTDIR)$(prefix)/share/gapi
+libdir=$(DESTDIR)$(prefix)/lib
+
 install: all
-	../mkinstalldirs $(DESTDIR)$(prefix)/lib && \
-	cp art-sharp.dll $(DESTDIR)$(prefix)/lib
+	../mkinstalldirs $(libdir) && 	\
+	cp $(APIS) $(apidir) && 	\
+	cp $(ASSEMBLY) $(libdir)

Index: atk/.cvsignore
===================================================================
RCS file: /cvs/public/gtk-sharp/atk/.cvsignore,v
retrieving revision 1.3
diff -u -r1.3 .cvsignore
--- atk/.cvsignore	21 Jun 2002 12:29:03 -0000	1.3
+++ atk/.cvsignore	9 Oct 2003 21:17:43 -0000
@@ -1,6 +1,5 @@
 *.dll
-*.exe
-*.xml
 generated
+generated-stamp
 Makefile
 
Index: atk/Makefile.in
===================================================================
RCS file: /cvs/public/gtk-sharp/atk/Makefile.in,v
retrieving revision 1.10
diff -u -r1.10 Makefile.in
--- atk/Makefile.in	8 Oct 2003 22:13:35 -0000	1.10
+++ atk/Makefile.in	9 Oct 2003 21:17:43 -0000
@@ -1,22 +1,34 @@
-MCS=mcs
-DESTDIR=
-prefix=@prefix@
+APIS=           atk-api.xml
 
-all: linux
+INCLUDE_APIS = 	../pango/pango-api.xml
 
-windows:
-	$(CSC) /unsafe /target:library /r:../glib/glib-sharp.dll /r:../pango/pango-sharp.dll /out:atk-sharp.dll /recurse:*.cs
+RUNTIME=mono
+MCS=mcs
+ASSEMBLY=atk-sharp.dll
 
-linux: atk-sharp.dll
+all: $(ASSEMBLY)
 
-atk-sharp.dll: generated/*.cs
-	$(MCS) --unsafe -nowarn:0660,0661 --target library -L ../glib -L ../pango -r glib-sharp.dll -r pango-sharp.dll -o atk-sharp.dll --recurse '*.cs'
+generated-stamp: $(APIS) ../generator/gapi_codegen.exe
+	$(RUNTIME) ../generator/gapi_codegen.exe --generate $(APIS) 	\
+	--include $(INCLUDE_APIS) --outdir=generated --customdir=.	\
+	--assembly-name=art-sharp && touch generated-stamp
+
+$(ASSEMBLY): generated-stamp
+	$(MCS) --unsafe -nowarn:0660,0661 --target library 	\
+	-r ../glib/glib-sharp.dll -r ../pango/pango-sharp.dll 	\
+	-o $(ASSEMBLY) --recurse '*.cs'
 
 clean:
-	rm -f *.dll
+	rm -f generated-stamp
+	rm -f $(ASSEMBLY)
 	rm -rf generated
 
-install: all
-	../mkinstalldirs $(DESTDIR)$(prefix)/lib && \
-	cp atk-sharp.dll $(DESTDIR)$(prefix)/lib
+prefix=/usr
+DESTDIR=
+apidir=$(DESTDIR)$(prefix)/share/gapi
+libdir=$(DESTDIR)$(prefix)/lib
 
+install: all
+	../mkinstalldirs $(libdir) && 	\
+	cp $(APIS) $(apidir) && 	\
+	cp $(ASSEMBLY) $(libdir)

Index: gda/.cvsignore
===================================================================
RCS file: /cvs/public/gtk-sharp/gda/.cvsignore,v
retrieving revision 1.1
diff -u -r1.1 .cvsignore
--- gda/.cvsignore	1 Sep 2002 10:29:39 -0000	1.1
+++ gda/.cvsignore	9 Oct 2003 21:17:44 -0000
@@ -1,6 +1,5 @@
 *.dll
-*.exe
-*.xml
 generated
+generated-stamp
 Makefile
 
Index: gda/Makefile.in
===================================================================
RCS file: /cvs/public/gtk-sharp/gda/Makefile.in,v
retrieving revision 1.6
diff -u -r1.6 Makefile.in
--- gda/Makefile.in	8 Oct 2003 22:13:36 -0000	1.6
+++ gda/Makefile.in	9 Oct 2003 21:17:44 -0000
@@ -1,22 +1,34 @@
+APIS=           gda-api.xml
+
+RUNTIME=mono
 MCS=mcs
-DESTDIR=
-prefix=@prefix@
+ASSEMBLY=gda-sharp.dll
 
-@ENABLE_GDA_TRUE@ all: linux
+@ENABLE_GDA_TRUE@ all: $(ASSEMBLY)
 @ENABLE_GDA_FALSE@ all: 
 
-windows:
-	$(CSC) /unsafe /target:library /r:../glib/glib-sharp.dll /out:gda-sharp.dll /recurse:*.cs
-
-linux: gda-sharp.dll
+all: $(ASSEMBLY)
 
-gda-sharp.dll: Application.cs generated/*.cs
-	$(MCS) --unsafe -nowarn:0660,0661 --target library -L ../glib -r glib-sharp.dll -o gda-sharp.dll --recurse '*.cs'
+generated-stamp: $(APIS) ../generator/gapi_codegen.exe
+	$(RUNTIME) ../generator/gapi_codegen.exe 		\
+	--generate $(APIS) --outdir=generated --customdir=.	\
+	--assembly-name=gda-sharp && touch generated-stamp
+
+$(ASSEMBLY): generated-stamp *.cs
+	$(MCS) --unsafe -nowarn:0660,0661 --target library 	\
+	-r ../glib/glib-sharp.dll -o $(ASSEMBLY) --recurse '*.cs'
 
 clean:
-	rm -f *.dll
+	rm -f generated-stamp
+	rm -f $(ASSEMBLY)
 	rm -rf generated
 
+prefix=/usr
+DESTDIR=
+apidir=$(DESTDIR)$(prefix)/share/gapi
+libdir=$(DESTDIR)$(prefix)/lib
+
 install: all
-@ENABLE_GDA_TRUE@	../mkinstalldirs $(DESTDIR)$(prefix)/lib && \
-@ENABLE_GDA_TRUE@	cp gda-sharp.dll $(DESTDIR)$(prefix)/lib
+@ENABLE_GDA_TRUE@	../mkinstalldirs $(libdir) && 	\
+@ENABLE_GDA_TRUE@	cp $(APIS) $(apidir) && 	\
+@ENABLE_GDA_TRUE@	cp $(ASSEMBLY) $(libdir)

Index: gdk/.cvsignore
===================================================================
RCS file: /cvs/public/gtk-sharp/gdk/.cvsignore,v
retrieving revision 1.4
diff -u -r1.4 .cvsignore
--- gdk/.cvsignore	21 Jun 2002 12:29:03 -0000	1.4
+++ gdk/.cvsignore	9 Oct 2003 21:17:44 -0000
@@ -1,6 +1,5 @@
 *.dll
-*.exe
-*.xml
 generated
+generated-stamp
 Makefile
 
Index: gdk/Makefile.in
===================================================================
RCS file: /cvs/public/gtk-sharp/gdk/Makefile.in,v
retrieving revision 1.12
diff -u -r1.12 Makefile.in
--- gdk/Makefile.in	8 Oct 2003 22:13:36 -0000	1.12
+++ gdk/Makefile.in	9 Oct 2003 21:17:44 -0000
@@ -1,22 +1,38 @@
-MCS=mcs
-DESTDIR=
-prefix=@prefix@
+APIS=           gdk-api.xml gdk-symbols.xml
 
-all: linux
+INCLUDE_APIS = 	../atk/atk-api.xml 	\
+		../pango/pango-api.xml
 
-windows:
-	$(CSC) /unsafe /target:library /r:../glib/glib-sharp.dll /r:../pango/pango-sharp.dll /r:../atk/atk-sharp.dll /out:gdk-sharp.dll /recurse:*.cs
+RUNTIME=mono
+MCS=mcs
+ASSEMBLY=gdk-sharp.dll
 
-linux: gdk-sharp.dll
+all: $(ASSEMBLY)
 
-gdk-sharp.dll: *.cs generated/*.cs
-	$(MCS) --unsafe -nowarn:0660,0661 --target library -r System.Drawing -L ../glib -L ../pango -L ../atk -r glib-sharp.dll -r pango-sharp.dll -r atk-sharp.dll -o gdk-sharp.dll --recurse '*.cs'
+generated-stamp: $(APIS) *.custom ../generator/gapi_codegen.exe
+	$(RUNTIME) ../generator/gapi_codegen.exe --generate $(APIS) 	\
+	--include $(INCLUDE_APIS) --outdir=generated --customdir=.	\
+	--assembly-name=gdk-sharp && touch generated-stamp
+
+$(ASSEMBLY): *.cs generated-stamp
+	$(MCS) --unsafe -nowarn:0660,0661 --target library 	\
+	-r System.Drawing -r ../glib/glib-sharp.dll 		\
+	-r ../pango/pango-sharp.dll -r ../atk/atk-sharp.dll 	\
+	-o $(ASSEMBLY) --recurse '*.cs'
 
 clean:
-	rm -f *.dll
+	rm -f generated-stamp
+	rm -f $(ASSEMBLY)
 	rm -rf generated
 
-install: all
-	../mkinstalldirs $(DESTDIR)$(prefix)/lib && \
-	cp gdk-sharp.dll $(DESTDIR)$(prefix)/lib
+prefix=/usr
+DESTDIR=
+apidir=$(DESTDIR)$(prefix)/share/gapi
+libdir=$(DESTDIR)$(prefix)/lib
 
+install: all
+	../mkinstalldirs $(libdir) &&	\
+	for i in $(APIS); do		\
+		cp $$i $(apidir);	\
+	done &&				\
+	cp $(ASSEMBLY) $(libdir)

Index: gdk/gdk-symbols.xml
===================================================================
RCS file: gdk/gdk-symbols.xml
diff -N gdk/gdk-symbols.xml
--- /dev/null	1 Jan 1970 00:00:00 -0000
+++ gdk/gdk-symbols.xml	9 Oct 2003 21:17:45 -0000
@@ -0,0 +1,5 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<api>
+  <symbol type="manual" cname="GdkEvent" name="Gdk.Event"/>
+</api>
+
Index: glade/.cvsignore
===================================================================
RCS file: /cvs/public/gtk-sharp/glade/.cvsignore,v
retrieving revision 1.1
diff -u -r1.1 .cvsignore
--- glade/.cvsignore	16 Aug 2002 05:00:31 -0000	1.1
+++ glade/.cvsignore	9 Oct 2003 21:17:45 -0000
@@ -1,6 +1,5 @@
 *.dll
-*.exe
-*.xml
 generated
+generated-stamp
 Makefile
 
Index: glade/Makefile.in
===================================================================
RCS file: /cvs/public/gtk-sharp/glade/Makefile.in,v
retrieving revision 1.6
diff -u -r1.6 Makefile.in
--- glade/Makefile.in	8 Oct 2003 22:13:36 -0000	1.6
+++ glade/Makefile.in	9 Oct 2003 21:17:45 -0000
@@ -1,22 +1,42 @@
-MCS=mcs
-DESTDIR=
-prefix=@prefix@
+APIS=           glade-api.xml
 
-@ENABLE_GLADE_TRUE@ all: linux
-@ENABLE_GLADE_FALSE@ all: 
+INCLUDE_APIS = 	../atk/atk-api.xml 	\
+		../pango/pango-api.xml 	\
+		../gdk/gdk-api.xml 	\
+		../gdk/gdk-symbols.xml	\
+		../gtk/gtk-api.xml	\
+		../gtk/gtk-symbols.xml
 
-windows:
-	$(CSC) /unsafe /target:library /r:../glib/glib-sharp.dll /r:../pango/pango-sharp.dll /r:../atk/atk-sharp.dll /r:../gdk/gdk-sharp.dll /r:../gtk/gtk-sharp.dll /out:glade-sharp.dll /recurse:*.cs
+RUNTIME=mono
+MCS=mcs
+ASSEMBLY=glade-sharp.dll
 
-linux: glade-sharp.dll
+@ENABLE_GLADE_TRUE@ all: $(ASSEMBLY)
+@ENABLE_GLADE_FALSE@ all: 
 
-glade-sharp.dll: *.cs generated/*.cs
-	$(MCS) --unsafe -nowarn:0660,0661 --target library -r System.Drawing -L ../glib -L ../pango -L ../atk -L ../gdk -L ../gtk -r glib-sharp.dll -r pango-sharp.dll -r atk-sharp.dll -r gdk-sharp.dll -r gtk-sharp.dll -o glade-sharp.dll --recurse '*.cs'
+generated-stamp: $(APIS) *.custom ../generator/gapi_codegen.exe
+	$(RUNTIME) ../generator/gapi_codegen.exe --generate $(APIS) 	\
+	--include $(INCLUDE_APIS) --outdir=generated --customdir=.	\
+	--assembly-name=art-sharp && touch generated-stamp
+
+$(ASSEMBLY): *.cs generated-stamp
+	$(MCS) --unsafe -nowarn:0660,0661 --target library 	\
+	-r System.Drawing -r ../glib/glib-sharp.dll 		\
+	-r ../pango/pango-sharp.dll -r ../atk/atk-sharp.dll	\
+	-r ../gdk/gdk-sharp.dll -r ../gtk/gtk-sharp.dll 	\
+	-o $(ASSEMBLY) --recurse '*.cs'
 
 clean:
-	rm -f *.dll
+	rm -f generated-stamp
+	rm -f $(ASSEMBLY)
 	rm -rf generated
 
+prefix=/usr
+DESTDIR=
+apidir=$(DESTDIR)$(prefix)/share/gapi
+libdir=$(DESTDIR)$(prefix)/lib
+
 install: all
-@ENABLE_GLADE_TRUE@	../mkinstalldirs $(DESTDIR)$(prefix)/lib && \
-@ENABLE_GLADE_TRUE@	cp glade-sharp.dll $(DESTDIR)$(prefix)/lib
+@ENABLE_GLADE_TRUE@	../mkinstalldirs $(libdir) && 	\
+@ENABLE_GLADE_TRUE@	cp $(APIS) $(apidir) && 	\
+@ENABLE_GLADE_TRUE@	cp $(ASSEMBLY) $(libdir)

Index: gnome/.cvsignore
===================================================================
RCS file: /cvs/public/gtk-sharp/gnome/.cvsignore,v
retrieving revision 1.1
diff -u -r1.1 .cvsignore
--- gnome/.cvsignore	4 Aug 2002 18:54:11 -0000	1.1
+++ gnome/.cvsignore	9 Oct 2003 21:17:45 -0000
@@ -1,6 +1,5 @@
 *.dll
-*.exe
-*.xml
 generated
+generated-stamp
 Makefile
 
Index: gnome/Makefile.in
===================================================================
RCS file: /cvs/public/gtk-sharp/gnome/Makefile.in,v
retrieving revision 1.10
diff -u -r1.10 Makefile.in
--- gnome/Makefile.in	8 Oct 2003 22:13:37 -0000	1.10
+++ gnome/Makefile.in	9 Oct 2003 21:17:45 -0000
@@ -1,23 +1,43 @@
-MCS=mcs
-DESTDIR=
-prefix=@prefix@
+APIS=           gnome-api.xml
 
-@ENABLE_GNOME_TRUE@ all: linux
-@ENABLE_GNOME_FALSE@ all: 
+INCLUDE_APIS = 	../atk/atk-api.xml 	\
+		../pango/pango-api.xml 	\
+		../art/art-api.xml	\
+		../gdk/gdk-api.xml 	\
+		../gdk/gdk-symbols.xml	\
+		../gtk/gtk-api.xml	\
+		../gtk/gtk-symbols.xml
 
-windows:
-	$(CSC) /unsafe /target:library /r:../glib/glib-sharp.dll /r:../pango/pango-sharp.dll /r:../atk/atk-sharp.dll /r:../gdk/gdk-sharp.dll /r:../gtk/gtk-sharp.dll /out:gnome-sharp.dll /recurse:*.cs
+RUNTIME=mono
+MCS=mcs
+ASSEMBLY=gnome-sharp.dll
 
-linux: gnome-sharp.dll
+@ENABLE_GNOME_TRUE@ all: $(ASSEMBLY)
+@ENABLE_GNOME_FALSE@ all: 
 
-gnome-sharp.dll: generated/*.cs
-	$(MCS) --unsafe -nowarn:0660,0661 --target library -r System.Drawing -L ../glib -L ../pango -L ../atk -L ../art -L ../gdk -L ../gtk -r glib-sharp.dll -r pango-sharp.dll -r atk-sharp.dll -r art-sharp.dll -r gdk-sharp.dll -r gtk-sharp.dll -o gnome-sharp.dll --recurse '*.cs'
+generated-stamp: $(APIS) *.custom ../generator/gapi_codegen.exe
+	$(RUNTIME) ../generator/gapi_codegen.exe --generate $(APIS) 	\
+	--include $(INCLUDE_APIS) --outdir=generated --customdir=.	\
+	--assembly-name=gnome-sharp && touch generated-stamp
+
+$(ASSEMBLY): *.cs generated-stamp
+	$(MCS) --unsafe -nowarn:0660,0661 --target library 	\
+	-r System.Drawing -r ../glib/glib-sharp.dll 		\
+	-r ../pango/pango-sharp.dll -r ../atk/atk-sharp.dll 	\
+	-r ../art/art-sharp.dll -r ../gdk/gdk-sharp.dll 	\
+	-r ../gtk/gtk-sharp.dll -o $(ASSEMBLY) --recurse '*.cs'
 
 clean:
-	rm -f *.dll
+	rm -f generated-stamp
+	rm -f $(ASSEMBLY)
 	rm -rf generated
 
-install: all
-@ENABLE_GNOME_TRUE@	../mkinstalldirs $(DESTDIR)$(prefix)/lib && \
-@ENABLE_GNOME_TRUE@	cp gnome-sharp.dll $(DESTDIR)$(prefix)/lib
+prefix=/usr
+DESTDIR=
+apidir=$(DESTDIR)$(prefix)/share/gapi
+libdir=$(DESTDIR)$(prefix)/lib
 
+install: all
+@ENABLE_GNOME_TRUE@	../mkinstalldirs $(libdir) && 	\
+@ENABLE_GNOME_TRUE@	cp $(APIS) $(apidir) && 	\
+@ENABLE_GNOME_TRUE@	cp $(ASSEMBLY) $(libdir)

Index: gnomedb/.cvsignore
===================================================================
RCS file: /cvs/public/gtk-sharp/gnomedb/.cvsignore,v
retrieving revision 1.1
diff -u -r1.1 .cvsignore
--- gnomedb/.cvsignore	11 Sep 2002 09:43:17 -0000	1.1
+++ gnomedb/.cvsignore	9 Oct 2003 21:17:51 -0000
@@ -1,6 +1,5 @@
 *.dll
-*.exe
-*.xml
 generated
+generated-stamp
 Makefile
 
Index: gnomedb/Makefile.in
===================================================================
RCS file: /cvs/public/gtk-sharp/gnomedb/Makefile.in,v
retrieving revision 1.6
diff -u -r1.6 Makefile.in
--- gnomedb/Makefile.in	8 Oct 2003 22:13:44 -0000	1.6
+++ gnomedb/Makefile.in	9 Oct 2003 21:17:51 -0000
@@ -1,22 +1,46 @@
-MCS=mcs
-DESTDIR=
-prefix=@prefix@
+APIS=           gnomedb-api.xml
 
-@ENABLE_GNOMEDB_TRUE@ all: linux
-@ENABLE_GNOMEDB_FALSE@ all: 
+INCLUDE_APIS = 	../atk/atk-api.xml 	\
+		../pango/pango-api.xml 	\
+		../art/art-api.xml	\
+		../gdk/gdk-api.xml 	\
+		../gdk/gdk-symbols.xml	\
+		../gtk/gtk-api.xml	\
+		../gtk/gtk-symbols.xml	\
+		../gnome/gnome-api.xml	\
+		../gda/gda-api.xml
 
-windows:
-	$(CSC) /unsafe /target:library /r:../glib/glib-sharp.dll /r:../pango/pango-sharp.dll /r:../atk/atk-sharp.dll /r:../art/art-sharp.dll /r:../gdk/gdk-sharp.dll /r:../gtk/gtk-sharp.dll /r:../gnome/gnome-sharp.dll /r:../gda/gda-sharp.dll /out:gnomedb-sharp.dll /recurse:*.cs
+RUNTIME=mono
+MCS=mcs
+ASSEMBLY=gnomedb-sharp.dll
 
-linux: gnomedb-sharp.dll
+@ENABLE_GNOMEDB_TRUE@ all: $(ASSEMBLY)
+@ENABLE_GNOMEDB_FALSE@ all: 
 
-gnomedb-sharp.dll: Application.cs generated/*.cs
-	$(MCS) --unsafe -nowarn:0660,0661 --target library -L ../glib -L ../pango -L ../atk -L ../art -L ../gdk -L ../gtk -L ../gnome -L ../gda -r glib-sharp.dll -r pango-sharp.dll -r atk-sharp.dll -r art-sharp.dll -r gdk-sharp.dll -r gtk-sharp.dll -r gnome-sharp.dll -r gda-sharp.dll -o gnomedb-sharp.dll --recurse '*.cs'
+generated-stamp: $(APIS) ../generator/gapi_codegen.exe
+	$(RUNTIME) ../generator/gapi_codegen.exe --generate $(APIS) 	\
+	--include $(INCLUDE_APIS) --outdir=generated --customdir=.	\
+	--assembly-name=gnomedb-sharp && touch generated-stamp
+
+$(ASSEMBLY): *.cs generated-stamp
+	$(MCS) --unsafe -nowarn:0660,0661 --target library 	\
+	-r ../glib/glib-sharp.dll -r ../pango/pango-sharp.dll 	\
+	-r ../atk/atk-sharp.dll -r ../art/art-sharp.dll 	\
+	-r ../gdk/gdk-sharp.dll -r ../gtk/gtk-sharp.dll 	\
+	-r ../gnome/gnome-sharp.dll -r ../gda/gda-sharp.dll 	\
+	-o $(ASSEMBLY) --recurse '*.cs'
 
 clean:
-	rm -f *.dll
+	rm -f generated-stamp
+	rm -f $(ASSEMBLY)
 	rm -rf generated
 
+prefix=/usr
+DESTDIR=
+apidir=$(DESTDIR)$(prefix)/share/gapi
+libdir=$(DESTDIR)$(prefix)/lib
+
 install: all
-@ENABLE_GNOMEDB_TRUE@	../mkinstalldirs $(DESTDIR)$(prefix)/lib && \
-@ENABLE_GNOMEDB_TRUE@	cp gnomedb-sharp.dll $(DESTDIR)$(prefix)/lib
+@ENABLE_GNOMEDB_TRUE@	../mkinstalldirs $(libdir) && 	\
+@ENABLE_GNOMEDB_TRUE@	cp $(APIS) $(apidir) && 	\
+@ENABLE_GNOMEDB_TRUE@	cp $(ASSEMBLY) $(libdir)

Index: gst/.cvsignore
===================================================================
RCS file: /cvs/public/gtk-sharp/gst/.cvsignore,v
retrieving revision 1.1
diff -u -r1.1 .cvsignore
--- gst/.cvsignore	3 Nov 2002 22:03:42 -0000	1.1
+++ gst/.cvsignore	9 Oct 2003 21:17:51 -0000
@@ -1,6 +1,5 @@
 *.dll
-*.exe
-*.xml
 generated
+generated-stamp
 Makefile
 
Index: gst/Makefile.in
===================================================================
RCS file: /cvs/public/gtk-sharp/gst/Makefile.in,v
retrieving revision 1.4
diff -u -r1.4 Makefile.in
--- gst/Makefile.in	8 Oct 2003 22:13:46 -0000	1.4
+++ gst/Makefile.in	9 Oct 2003 21:17:51 -0000
@@ -1,22 +1,33 @@
-MCS=mcs
-DESTDIR=
-prefix=@prefix@
+APIS=           gst-api.xml
 
-all: linux
-
-windows:
-	$(CSC) /unsafe /target:library /r:../glib/glib-sharp.dll /out:gst-sharp.dll /recurse:*.cs
+RUNTIME=mono
+MCS=mcs
+ASSEMBLY=gst-sharp.dll
 
-linux: gst-sharp.dll
+all: $(ASSEMBLY)
 
-gst-sharp.dll: *.cs
-	$(MCS) --unsafe --target library -L ../glib -r glib-sharp.dll -o gst-sharp.dll --recurse '*.cs'
+generated-stamp: $(APIS) ../generator/gapi_codegen.exe
+	$(RUNTIME) ../generator/gapi_codegen.exe --generate $(APIS) 	\
+	--outdir=generated --customdir=. --assembly-name=gst-sharp 	\
+	&& touch generated-stamp
+
+$(ASSEMBLY): *.cs generated-stamp
+	$(MCS) --unsafe --target library \
+	-r glib-sharp.dll -o $(ASSEMBLY) --recurse '*.cs'
 
 clean:
-	rm -f *.dll
+	rm -f generated-stamp
+	rm -f $(ASSEMBLY)
 	rm -rf generated
 
+prefix=/usr
+DESTDIR=
+apidir=$(DESTDIR)$(prefix)/share/gapi
+libdir=$(DESTDIR)$(prefix)/lib
+
 install: all
-	../mkinstalldirs $(DESTDIR)$(prefix)/lib && \
-	cp gst-sharp.dll $(DESTDIR)$(prefix)/lib || exit 1
+	../mkinstalldirs $(libdir) && 	\
+	cp $(APIS) $(apidir) && 	\
+	cp $(ASSEMBLY) $(libdir)
+
 

Index: gtk/.cvsignore
===================================================================
RCS file: /cvs/public/gtk-sharp/gtk/.cvsignore,v
retrieving revision 1.5
diff -u -r1.5 .cvsignore
--- gtk/.cvsignore	21 Jun 2002 12:29:04 -0000	1.5
+++ gtk/.cvsignore	9 Oct 2003 21:17:51 -0000
@@ -1,6 +1,5 @@
 *.dll
-*.exe
-*.xml
 generated
+generated-stamp
 Makefile
 
Index: gtk/Makefile.in
===================================================================
RCS file: /cvs/public/gtk-sharp/gtk/Makefile.in,v
retrieving revision 1.14
diff -u -r1.14 Makefile.in
--- gtk/Makefile.in	8 Oct 2003 22:13:47 -0000	1.14
+++ gtk/Makefile.in	9 Oct 2003 21:17:51 -0000
@@ -1,22 +1,40 @@
-MCS=mcs
-DESTDIR=
-prefix=@prefix@
+APIS=           gtk-api.xml gtk-symbols.xml
 
-all: linux
+INCLUDE_APIS = 	../atk/atk-api.xml 	\
+		../pango/pango-api.xml 	\
+		../gdk/gdk-api.xml 	\
+		../gdk/gdk-symbols.xml
 
-windows:
-	$(CSC) /unsafe /target:library /r:../glib/glib-sharp.dll /r:../pango/pango-sharp.dll /r:../atk/atk-sharp.dll /r:../gdk/gdk-sharp.dll /r:../gdk/gdk-imaging-sharp.dll /out:gtk-sharp.dll /recurse:*.cs
+RUNTIME=mono
+MCS=mcs
+ASSEMBLY=gtk-sharp.dll
 
-linux: gtk-sharp.dll
+all: $(ASSEMBLY)
 
-gtk-sharp.dll: *.cs generated/*.cs
-	$(MCS) --unsafe -nowarn:0660,0661 --target library -r System.Drawing -L ../glib -L ../pango -L ../atk -L ../gdk -r glib-sharp.dll -r pango-sharp.dll -r atk-sharp.dll -r gdk-sharp.dll -o gtk-sharp.dll --recurse '*.cs'
+generated-stamp: $(APIS) *.custom ../generator/gapi_codegen.exe
+	$(RUNTIME) ../generator/gapi_codegen.exe --generate $(APIS) 	\
+	--include $(INCLUDE_APIS) --outdir=generated --customdir=.	\
+	--assembly-name=gtk-sharp && touch generated-stamp
+
+$(ASSEMBLY): *.cs generated-stamp
+	$(MCS) --unsafe -nowarn:0660,0661 --target library 	\
+	-r System.Drawing -r ../glib/glib-sharp.dll 		\
+	-r ../pango/pango-sharp.dll -r ../atk/atk-sharp.dll	\
+	-r ../gdk/gdk-sharp.dll -o $(ASSEMBLY) --recurse '*.cs'
 
 clean:
-	rm -f *.dll
+	rm -f generated-stamp
+	rm -f $(ASSEMBLY)
 	rm -rf generated
 
-install: all
-	../mkinstalldirs $(DESTDIR)$(prefix)/lib && \
-	cp gtk-sharp.dll $(DESTDIR)$(prefix)/lib
+prefix=/usr
+DESTDIR=
+apidir=$(DESTDIR)$(prefix)/share/gapi
+libdir=$(DESTDIR)$(prefix)/lib
 
+install: all
+	../mkinstalldirs $(libdir) &&		\
+	for i in $(APIS); do                    \
+		cp $$i $(apidir) || true;       \
+	done && 				\
+	cp $(ASSEMBLY) $(libdir)

Index: gtk/gtk-symbols.xml
===================================================================
RCS file: gtk/gtk-symbols.xml
diff -N gtk/gtk-symbols.xml
--- /dev/null	1 Jan 1970 00:00:00 -0000
+++ gtk/gtk-symbols.xml	9 Oct 2003 21:17:53 -0000
@@ -0,0 +1,5 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<api>
+  <symbol type="simple" cname="GtkType" name="uint"/>
+</api>
+
Index: gtkhtml/.cvsignore
===================================================================
RCS file: /cvs/public/gtk-sharp/gtkhtml/.cvsignore,v
retrieving revision 1.2
diff -u -r1.2 .cvsignore
--- gtkhtml/.cvsignore	7 Oct 2003 16:19:51 -0000	1.2
+++ gtkhtml/.cvsignore	9 Oct 2003 21:17:53 -0000
@@ -1,4 +1,4 @@
-gtkhtml-sharp.dll
+*.dll
 generated
 generated-stamp
 Makefile
Index: gtkhtml/Makefile.in
===================================================================
RCS file: /cvs/public/gtk-sharp/gtkhtml/Makefile.in,v
retrieving revision 1.4
diff -u -r1.4 Makefile.in
--- gtkhtml/Makefile.in	7 Oct 2003 17:11:19 -0000	1.4
+++ gtkhtml/Makefile.in	9 Oct 2003 21:17:53 -0000
@@ -1,25 +1,34 @@
-INCLUDE_APIS = \
-	../api/atk-api.xml \
-	../api/pango-api.xml \
-	../api/gdk-api.xml \
-	../api/gdk-symbols.xml \
-	../api/gtk-symbols.xml \
-	../api/gtk-api.xml \
-	../api/gnome-api.xml
+APIS=           gtkhtml-api.xml
+
+INCLUDE_APIS = 	../atk/atk-api.xml	\
+		../pango/pango-api.xml 	\
+		../gdk/gdk-api.xml 	\
+		../gdk/gdk-symbols.xml 	\
+		../gtk/gtk-symbols.xml 	\
+		../gtk/gtk-api.xml 	\
+		../gnome/gnome-api.xml
 
 RUNTIME=mono 
+MCS=mcs
+ASSEMBLY=gtkhtml-sharp.dll
 
-all: gtkhtml-sharp.dll
+all: $(ASSEMBLY)
 
 generated-stamp: gtkhtml-api.xml *.custom ../generator/gapi_codegen.exe
-	$(RUNTIME) ../generator/gapi_codegen.exe --generate gtkhtml-api.xml --include $(INCLUDE_APIS) --outdir=generated --customdir=. --assembly-name=gtkhtml-sharp && touch generated-stamp
-
-gtkhtml-sharp.dll: generated-stamp
-	 $(MCS) --unsafe -nowarn:0660,0661 --target library -L ../glib -L ../pango -L ../atk -L ../gdk -L ../gtk -L ../art -L ../gnome -r glib-sharp.dll -r pango-sharp.dll -r atk-sharp.dll -r gdk-sharp.dll -r gtk-sharp.dll -r art-sharp.dll -r gnome-sharp.dll -o gtkhtml-sharp.dll --recurse '*.cs'
+	$(RUNTIME) ../generator/gapi_codegen.exe --generate $(APIS)	\
+	--include $(INCLUDE_APIS) --outdir=generated --customdir=. 	\
+	--assembly-name=gtkhtml-sharp && touch generated-stamp
+
+$(ASSEMBLY): generated-stamp
+	 $(MCS) --unsafe -nowarn:0660,0661 --target library 	\
+	-r ../glib/glib-sharp.dll -r ../pango/pango-sharp.dll 	\
+	-r ../atk/atk-sharp.dll -r ../gdk/gdk-sharp.dll 	\
+	-r ../gtk/gtk-sharp.dll -r ../art/art-sharp.dll 	\
+	-r ../gnome/gnome-sharp.dll -o $(ASSEMBLY) --recurse '*.cs'
 
 clean:
 	rm -f generated-stamp
-	rm -f gtkhtml-sharp.dll
+	rm -f $(ASSEMBLY)
 	rm -rf generated
 
 prefix=@prefix@
@@ -29,5 +38,5 @@
 
 install: all
 	../mkinstalldirs $(apidir) && \
-	cp gtkhtml-api.xml $(apidir) && \
-	cp gtkhtml-sharp.dll $(libdir)
+	cp $(APIS) $(apidir) && \
+	cp $(ASSEMBLY) $(libdir)
Index: pango/.cvsignore
===================================================================
RCS file: /cvs/public/gtk-sharp/pango/.cvsignore,v
retrieving revision 1.4
diff -u -r1.4 .cvsignore
--- pango/.cvsignore	21 Jun 2002 12:29:04 -0000	1.4
+++ pango/.cvsignore	9 Oct 2003 21:17:53 -0000
@@ -1,6 +1,5 @@
 *.dll
-*.exe
-*.xml
 generated
+generated-stamp
 Makefile
 
Index: pango/Makefile.in
===================================================================
RCS file: /cvs/public/gtk-sharp/pango/Makefile.in,v
retrieving revision 1.11
diff -u -r1.11 Makefile.in
--- pango/Makefile.in	8 Oct 2003 22:13:47 -0000	1.11
+++ pango/Makefile.in	9 Oct 2003 21:17:53 -0000
@@ -1,22 +1,32 @@
-MCS=mcs
-DESTDIR=
-prefix=@prefix@
+APIS=           pango-api.xml
 
-all: linux
-
-windows:
-	$(CSC) /unsafe /target:library /r:../glib/glib-sharp.dll /out:pango-sharp.dll /recurse:*.cs
+RUNTIME=mono
+MCS=mcs
+ASSEMBLY=pango-sharp.dll
 
-linux: pango-sharp.dll
+all: $(ASSEMBLY)
 
-pango-sharp.dll: generated/*.cs
-	$(MCS) --unsafe -nowarn:0660,0661 --target library -L ../glib -r glib-sharp.dll -r System.Drawing -o pango-sharp.dll --recurse '*.cs'
+generated-stamp: $(APIS) *.custom ../generator/gapi_codegen.exe
+	$(RUNTIME) ../generator/gapi_codegen.exe --generate $(APIS) 	\
+	--outdir=generated --customdir=. --assembly-name=pango-sharp 	\
+	&& touch generated-stamp
+
+$(ASSEMBLY): *.cs generated-stamp
+	$(MCS) --unsafe -nowarn:0660,0661 --target library 	\
+	-r System.Drawing -r glib-sharp.dll 			\
+	-o $(ASSEMBLY) --recurse '*.cs'
 
 clean:
-	rm -f *.dll
+	rm -f generated-stamp
+	rm -f $(ASSEMBLY)
 	rm -rf generated
 
-install: all
-	../mkinstalldirs $(DESTDIR)$(prefix)/lib && \
-	cp pango-sharp.dll $(DESTDIR)$(prefix)/lib
+prefix=/usr
+DESTDIR=
+apidir=$(DESTDIR)$(prefix)/share/gapi
+libdir=$(DESTDIR)$(prefix)/lib
 
+install: all
+	../mkinstalldirs $(libdir) && 	\
+	cp $(APIS) $(apidir) && 	\
+	cp $(ASSEMBLY) $(libdir)

Index: rsvg/.cvsignore
===================================================================
RCS file: /cvs/public/gtk-sharp/rsvg/.cvsignore,v
retrieving revision 1.1
diff -u -r1.1 .cvsignore
--- rsvg/.cvsignore	27 Feb 2003 05:16:47 -0000	1.1
+++ rsvg/.cvsignore	9 Oct 2003 21:17:53 -0000
@@ -1,4 +1,5 @@
 *.dll
 generated
+generated-stamp
 Makefile
 
Index: rsvg/Makefile.in
===================================================================
RCS file: /cvs/public/gtk-sharp/rsvg/Makefile.in,v
retrieving revision 1.5
diff -u -r1.5 Makefile.in
--- rsvg/Makefile.in	8 Oct 2003 22:13:47 -0000	1.5
+++ rsvg/Makefile.in	9 Oct 2003 21:17:53 -0000
@@ -1,39 +1,43 @@
-COMPILER=mcs
-OUTPUT=rsvg-sharp.dll
-prefix=@prefix@
-
-@ENABLE_RSVG_TRUE@ all: linux
-@ENABLE_RSVG_FALSE@ all:
-
-linux: $(OUTPUT)
-
-$(OUTPUT): *.cs generated/*.cs
-	$(COMPILER) \
-	    --unsafe\
-            -nowarn:0660,0661 \
-	    --target library \
-	    -r ../glib/glib-sharp.dll \
-	    -r ../pango/pango-sharp.dll \
-	    -r ../atk/atk-sharp.dll \
-	    -r ../gdk/gdk-sharp.dll \
-	    -r ../gtk/gtk-sharp.dll \
-	    -r ../art/art-sharp.dll \
-	    -o $(OUTPUT) \
-	    --recurse '*.cs'
-
+APIS=           rsvg-api.xml
 
+INCLUDE_APIS = 	../atk/atk-api.xml 	\
+		../pango/pango-api.xml 	\
+		../gdk/gdk-api.xml 	\
+		../gdk/gdk-symbols.xml	\
+		../gtk/gtk-api.xml	\
+		../gtk/gtk-symbols.xml	\
+		../art/art-api.xml
+
+RUNTIME=mono
+MCS=mcs
+ASSEMBLY=rsvg-sharp.dll
 
-clean: clean-dll clean-generated
-
-clean-dll:
-	rm -f *.dll
+@ENABLE_RSVG_TRUE@ all: $(ASSEMBLY)
+@ENABLE_RSVG_FALSE@ all:
 
-clean-generated:	
+generated-stamp: $(APIS) ../generator/gapi_codegen.exe
+	$(RUNTIME) ../generator/gapi_codegen.exe --generate $(APIS) 	\
+	--include $(INCLUDE_APIS) --outdir=generated --customdir=.	\
+	--assembly-name=rsvg-sharp && touch generated-stamp
+
+$(ASSEMBLY): *.cs generated-stamp
+	$(MCS) --unsafe -nowarn:0660,0661 --target library 	\
+	-r ../glib/glib-sharp.dll -r ../pango/pango-sharp.dll 	\
+	-r ../atk/atk-sharp.dll -r ../gdk/gdk-sharp.dll 	\
+	-r ../gtk/gtk-sharp.dll -r ../art/art-sharp.dll 	\
+	-o $(ASSEMBLY) --recurse '*.cs'
+
+clean:
+	rm -f generated-stamp
+	rm -f $(ASSEMBLY)
 	rm -rf generated
 
-
+prefix=/usr
+DESTDIR=
+apidir=$(DESTDIR)$(prefix)/share/gapi
+libdir=$(DESTDIR)$(prefix)/lib
 
 install: all
-@ENABLE_RSVG_TRUE@	../mkinstalldirs $(DESTDIR)$(prefix)/lib && \
-@ENABLE_RSVG_TRUE@	cp $(OUTPUT) $(DESTDIR)$(prefix)/lib
-
+@ENABLE_RSVG_TRUE@	../mkinstalldirs $(libdir) && 	\
+@ENABLE_RSVG_TRUE@	cp $(APIS) $(apidir) && 	\
+@ENABLE_RSVG_TRUE@	cp $(ASSEMBLY) $(libdir)

Index: sources/gtk-sharp-sources.xml
===================================================================
RCS file: /cvs/public/gtk-sharp/sources/gtk-sharp-sources.xml,v
retrieving revision 1.2
diff -u -r1.2 gtk-sharp-sources.xml
--- sources/gtk-sharp-sources.xml	7 Oct 2003 05:52:23 -0000	1.2
+++ sources/gtk-sharp-sources.xml	9 Oct 2003 21:17:53 -0000
@@ -1,19 +1,19 @@
 <gapi-parser-input>
-  <api filename="../api/atk-api.xml">
+  <api filename="../atk/atk-api.xml">
     <library name="libatk-1.0-0.dll">
       <namespace name="Atk">
         <dir>atk-1.2.4/atk</dir>
       </namespace>
     </library>
   </api>
-  <api filename="../api/pango-api.xml">
+  <api filename="../pango/pango-api.xml">
     <library name="libpango-1.0-0.dll">
       <namespace name="Pango">
         <dir>pango-1.2.3/pango</dir>
       </namespace>
     </library>
   </api>
-  <api filename="../api/gdk-api.xml">
+  <api filename="../gdk/gdk-api.xml">
     <library name="libgdk-win32-2.0-0.dll">
       <namespace name="Gdk">
         <dir>gtk+-2.2.2/gdk</dir>
@@ -25,14 +25,14 @@
       </namespace>
     </library>
   </api>
-  <api filename="../api/gtk-api.xml">
+  <api filename="../gtk/gtk-api.xml">
     <library name="libgtk-win32-2.0-0.dll">
       <namespace name="Gtk">
         <dir>gtk+-2.2.2/gtk</dir>
       </namespace>
     </library>
   </api>
-  <api filename="../api/gnome-api.xml">
+  <api filename="../gnome/gnome-api.xml">
     <library name="gnome-2">
       <namespace name="Gnome">
         <dir>libgnome-2.2.3/libgnome</dir>
@@ -67,42 +67,42 @@
       </namespace>
     </library>
   </api>
-  <api filename="../api/glade-api.xml">
+  <api filename="../glade/glade-api.xml">
     <library name="libglade-2.0-0.dll">
       <namespace name="Glade">
         <dir>libglade-2.0.0/glade</dir>
       </namespace>
     </library>
   </api>
-  <api filename="../api/art-api.xml">
+  <api filename="../art/art-api.xml">
     <library name="art_lgpl">
       <namespace name="Art">
         <dir>libart_lgpl-2.3.10</dir>
       </namespace>
     </library>
   </api>
-  <api filename="../api/gda-api.xml">
+  <api filename="../gda/gda-api.xml">
     <library name="gda-2">
       <namespace name="Gda">
         <dir>libgda-1.0.0/libgda</dir>
       </namespace>
     </library>
   </api>
-  <api filename="../api/gnomedb-api.xml">
+  <api filename="../gnomedb/gnomedb-api.xml">
     <library name="gnomedb-2">
       <namespace name="GnomeDb">
         <dir>libgnomedb-1.0.0/libgnomedb</dir>
       </namespace>
     </library>
   </api>
-  <api filename="../api/gst-api.xml">
+  <api filename="../gst/gst-api.xml">
     <library name="gstreamer">
       <namespace name="Gst">
         <dir>gstreamer-0.4.2/gst</dir>
       </namespace>
     </library>
   </api>
-  <api filename="../api/rsvg-api.xml">
+  <api filename="../rsvg/rsvg-api.xml">
     <library name="rsvg-2">
       <namespace name="Rsvg">
         <dir>librsvg-2.2.5</dir>
