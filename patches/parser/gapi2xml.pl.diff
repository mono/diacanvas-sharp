--- /mnt/gnu/cvs/mono/gtk-sharp/parser/gapi2xml.pl	2003-06-23 14:59:30.000000000 +0200
+++ gapi2xml.pl	2003-07-04 18:11:31.000000000 +0200
@@ -600,7 +600,30 @@
 	my ($name, $mode, $docs);
 	$spec =~ /g_param_spec_(\w+)\s*\((.*)\s*\)\s*\)/;
 	my $type = $1;
-	my @params = split(/,/, $2);
+
+	# Splits $2 up into parameters based on the , seperator. 
+	# Though a , in a string is ignored ie "Foo, bar"
+	@chars = split (//, $2);
+	my @params;
+	$last_param;
+	$in_str_arg = -1;
+	
+	foreach $c (@chars) {
+		if ($c eq ',' && $in_str_arg < 0) { 
+			@params = (@params, $last_param);
+			$last_param = "";
+			next; 
+		}
+
+		$last_param .= $c;
+
+		if ($c eq '"') {
+			$in_str_arg *= -1;
+			next;
+		}
+	}
+	@params = (@params, $last_param);
+	$last_param = "";
 
 	$name = $params[0];
 	if ($defines{$name}) {
